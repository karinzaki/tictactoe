<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    .player-selection {
      display: grid;
      grid-template-columns: repeat(2, 90px);
      width: 170px;
      height: 50px;
      position: center;
      justify-content: center;
      column-gap: 10px;
      margin: 15px auto;
    }

    .player-X, .player-O {
      display: flex;
      text-align: center;
      align-items: center;
      justify-content: center;
      font-size: 17px;
      border-radius: 8px;
    }

    .game-grid {
      display: grid;
      grid-template-columns: repeat(3, 120px);
      grid-template-rows: repeat(3, 120px);
      column-gap: 15px;
      row-gap: 15px;
      width: 490px;
      height: 490px;
      position: center;
      margin: 20px auto 60px;
      background-color: antiquewhite;
      justify-content: center;
      align-content: center;
      border-radius: 60px;
      margin-bottom: 0px;
    }

    .cell {
      display: flex;
      border: 1px black solid;
      text-align: center;
      font-size: 80px;
      border-radius: 10px;
      align-items: center;
      justify-content: center;
    }

    h1 {
      color: transparent!important;
      -webkit-text-stroke-width: 2px;
      -webkit-text-stroke-color: black;
      font-size: 60px;
      text-align: center;
      margin-top: 50px;
      margin-bottom: 0px;
    }

    h2 {
      font-size: 30px;
      text-align: center;
      text-shadow: -0.6px -0.6px 0 rgb(139, 138, 138);
      color: rgb(255, 123, 0);
      -webkit-text-stroke-width: 0.5px;
      -webkit-text-stroke-color: black;
      margin-bottom: 0px;
    }

    body {
      background-color: rgb(245, 224, 197);
    }

    .reset-btn {
      display: grid;
      grid-template-columns: 60px;
      justify-content: center;
      position: center;
    }

    .reset {
      height: 40px;
      width: 70px;
      font-size: 18px;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <section>
    <h1>Tic Tac Toe Game</h1>
    <div class="player-selection">
      <button class="player-X" id="x">Player X</button>
      <button class="player-O" id="o">Player O</button>
    </div>
    <h2 class="h2"></h2>
    <div class="game-grid">
      <div id="1" class="cell"></div>
      <div id="2" class="cell"></div>
      <div id="3" class="cell"></div>
      <div id="4" class="cell"></div>
      <div id="5" class="cell"></div>
      <div id="6" class="cell"></div>
      <div id="7" class="cell"></div>
      <div id="8" class="cell"></div>
      <div id="9" class="cell"></div>
    </div>
    <h2 class="game-status"></h2>
    <div class="reset-btn">
      <button class="reset">Reset</button>
    </div>
  </section>
  <script>
    let humanPlayer = 'X'
let computerPlayer = 'O'

// create a variable that accesses the cells in the grid
const gridCells = document.querySelectorAll('.game-grid')
const eachGridCellText = gridCells.forEach(element => element.addEventListener('click', updateText))

const playerSelection = document.querySelectorAll('.player-selection')
const selectedPlayer = playerSelection.forEach(element => element.addEventListener('click', setPlayer))

function setPlayer(clickedPlayerEvent) {
  const clickedPlayer = clickedPlayerEvent.target

  if (clickedPlayer.textContent == 'Player X') {
    var currentPlayer = humanPlayer
    var playerX = document.getElementById("x")
    playerSelection.forEach(element => element.removeEventListener('click', setPlayer))
    playerX.style.background = "rgb(255, 123, 0)"
  } 
  if (clickedPlayer.textContent == 'Player O') {
    var currentPlayer = computerPlayer
    var playerO = document.getElementById("o")
    playerSelection.forEach(element => element.removeEventListener('click', setPlayer))
    playerO.style.background = "rgb(255, 123, 0)"
  }
  h2.textContent = currentPlayer + " Your Turn to Play!"
} 

let currentPlayer = selectedPlayer

// let currentPlayer = humanPlayer

// set value to collect the heading from the HTML file
var h2 = document.querySelector('.h2')

// alert the player it is their turn
// h2.textContent = currentPlayer + " Your Turn to Play!"

// assign the gameStatus variable in the HTML to the playersTurn
// gameStatus.innerHTML = playersTurn

// access te clicked cell in the function and update it to the currentPlayer boht in index and the player
function updateText(clickedCellEvent) {

  // save the clicked cell in a variable
  const clickedCell = clickedCellEvent.target
  // grab the cell index as an integer from the clicked cell
  const cellIndex = parseInt(clickedCell.getAttribute('.cell'))
  // swap players depending on who played last; if the cell clicked displays an X, then the player is humanPlayer meaning next turn should be computerPlayer
  // defines the textContent first then checks it in the if statement
  if (clickedCell.textContent != '')
  return
  clickedCell.textContent = currentPlayer

  // set values for each Id to collect the content inside each cell
  // can create a loop to get the element instead of doing the below
  var b1 = document.getElementById("1").textContent
  var b2 = document.getElementById("2").textContent
  var b3 = document.getElementById("3").textContent
  var b4 = document.getElementById("4").textContent
  var b5 = document.getElementById("5").textContent
  var b6 = document.getElementById("6").textContent
  var b7 = document.getElementById("7").textContent
  var b8 = document.getElementById("8").textContent
  var b9 = document.getElementById("9").textContent

  // set values for each Id to collect the cell itself
  // can create a loop to get the element instead of doing the below
  var cell1 = document.getElementById("1")
  var cell2 = document.getElementById("2")
  var cell3 = document.getElementById("3")
  var cell4 = document.getElementById("4")
  var cell5 = document.getElementById("5")
  var cell6 = document.getElementById("6")
  var cell7 = document.getElementById("7")
  var cell8 = document.getElementById("8")
  var cell9 = document.getElementById("9")

  if (clickedCell.textContent != humanPlayer) {
    currentPlayer = humanPlayer
    h2.textContent = humanPlayer + " Your Turn to Play!"
  } else {
    currentPlayer = computerPlayer
    h2.textContent = computerPlayer + " Your Turn to Play!"
  } 
  
  // check the winning conditions
  if (b1 == humanPlayer && b2 == humanPlayer && b3 == humanPlayer) {
    gridCells.forEach(element => element.removeEventListener('click', updateText))
    cell1.style.background = "rgb(167, 223, 150)"
    cell2.style.background = "rgb(167, 223, 150)"
    cell3.style.background = "rgb(167, 223, 150)"
    h2.textContent = humanPlayer + " Won!"
  } else if (b1 == humanPlayer && b4 == humanPlayer && b7 == humanPlayer) {
    gridCells.forEach(element => element.removeEventListener('click', updateText))
    cell1.style.background = "rgb(167, 223, 150)"
    cell4.style.background = "rgb(167, 223, 150)"
    cell7.style.background = "rgb(167, 223, 150)"
    h2.textContent = humanPlayer + " Won!"
  } else if (b1 == humanPlayer && b5 == humanPlayer && b9 == humanPlayer) {
    gridCells.forEach(element => element.removeEventListener('click', updateText))
    cell1.style.background = "rgb(167, 223, 150)"
    cell5.style.background = "rgb(167, 223, 150)"
    cell9.style.background = "rgb(167, 223, 150)"
    h2.textContent = humanPlayer + " Won!"
  } else if (b2 == humanPlayer && b5 == humanPlayer && b8 == humanPlayer) {
    gridCells.forEach(element => element.removeEventListener('click', updateText))
    cell2.style.background = "rgb(167, 223, 150)"
    cell5.style.background = "rgb(167, 223, 150)"
    cell8.style.background = "rgb(167, 223, 150)"
    h2.textContent = humanPlayer + " Won!"
  } else if (b3 == humanPlayer && b6 == humanPlayer && b9 == humanPlayer) {
    gridCells.forEach(element => element.removeEventListener('click', updateText))
    cell3.style.background = "rgb(167, 223, 150)"
    cell6.style.background = "rgb(167, 223, 150)"
    cell9.style.background = "rgb(167, 223, 150)"
    h2.textContent = humanPlayer + " Won!"
  } else if (b3 == humanPlayer && b5 == humanPlayer && b7 == humanPlayer) {
    gridCells.forEach(element => element.removeEventListener('click', updateText))
    cell3.style.background = "rgb(167, 223, 150)"
    cell5.style.background = "rgb(167, 223, 150)"
    cell7.style.background = "rgb(167, 223, 150)"
    h2.textContent = humanPlayer + " Won!"
  } else if (b4 == humanPlayer && b5 == humanPlayer && b6 == humanPlayer) {
    gridCells.forEach(element => element.removeEventListener('click', updateText))
    cell4.style.background = "rgb(167, 223, 150)"
    cell5.style.background = "rgb(167, 223, 150)"
    cell6.style.background = "rgb(167, 223, 150)"
    h2.textContent = humanPlayer + " Won!"
  } else if (b7 == humanPlayer && b8 == humanPlayer && b9 == humanPlayer) {
    gridCells.forEach(element => element.removeEventListener('click', updateText))
    cell7.style.background = "rgb(167, 223, 150)"
    cell8.style.background = "rgb(167, 223, 150)"
    cell9.style.background = "rgb(167, 223, 150)"
    h2.textContent = humanPlayer + " Won!"
  } else if (b1 == computerPlayer && b2 == computerPlayer && b3 == computerPlayer) {
    gridCells.forEach(element => element.removeEventListener('click', updateText))
    cell1.style.background = "rgb(167, 223, 150)"
    cell2.style.background = "rgb(167, 223, 150)"
    cell3.style.background = "rgb(167, 223, 150)"
    h2.textContent = computerPlayer + " Won!"
  } else if (b1 == computerPlayer && b4 == computerPlayer && b7 == computerPlayer) {
    gridCells.forEach(element => element.removeEventListener('click', updateText))
    cell1.style.background = "rgb(167, 223, 150)"
    cell4.style.background = "rgb(167, 223, 150)"
    cell7.style.background = "rgb(167, 223, 150)"
    h2.textContent = computerPlayer + " Won!"
  } else if (b1 == computerPlayer && b5 == computerPlayer && b9 == computerPlayer) {
    gridCells.forEach(element => element.removeEventListener('click', updateText))
    cell1.style.background = "rgb(167, 223, 150)"
    cell5.style.background = "rgb(167, 223, 150)"
    cell9.style.background = "rgb(167, 223, 150)"
    h2.textContent = computerPlayer + " Won!"
  } else if (b2 == computerPlayer && b5 == computerPlayer && b8 == computerPlayer) {
    gridCells.forEach(element => element.removeEventListener('click', updateText))
    cell2.style.background = "rgb(167, 223, 150)"
    cell5.style.background = "rgb(167, 223, 150)"
    cell8.style.background = "rgb(167, 223, 150)"
    h2.textContent = computerPlayer + " Won!"
  } else if (b3 == computerPlayer && b6 == computerPlayer && b9 == computerPlayer) {
    gridCells.forEach(element => element.removeEventListener('click', updateText))
    cell3.style.background = "rgb(167, 223, 150)"
    cell6.style.background = "rgb(167, 223, 150)"
    cell9.style.background = "rgb(167, 223, 150)"
    h2.textContent = computerPlayer + " Won!"
  } else if (b3 == computerPlayer && b5 == computerPlayer && b7 == computerPlayer) {
    gridCells.forEach(element => element.removeEventListener('click', updateText))
    cell3.style.background = "rgb(167, 223, 150)"
    cell5.style.background = "rgb(167, 223, 150)"
    cell7.style.background = "rgb(167, 223, 150)"
    h2.textContent = computerPlayer + " Won!"
  } else if (b4 == computerPlayer && b5 == computerPlayer && b6 == computerPlayer) {
    gridCells.forEach(element => element.removeEventListener('click', updateText))
    cell4.style.background = "rgb(167, 223, 150)"
    cell5.style.background = "rgb(167, 223, 150)"
    cell6.style.background = "rgb(167, 223, 150)"
    h2.textContent = computerPlayer + " Won!"
  } else if (b7 == computerPlayer && b8 == computerPlayer && b9 == computerPlayer) {
    gridCells.forEach(element => element.removeEventListener('click', updateText))
    cell7.style.background = "rgb(167, 223, 150)"
    cell8.style.background = "rgb(167, 223, 150)"
    cell9.style.background = "rgb(167, 223, 150)"
    h2.textContent = computerPlayer + " Won!"
  } else if ((b1 == humanPlayer || b1 == computerPlayer) && (b2 == humanPlayer 
  || b2 == computerPlayer) && (b3 == humanPlayer || b3 == computerPlayer) && 
  (b4 == humanPlayer|| b4 == computerPlayer) && (b5 == humanPlayer || 
  b5 == computerPlayer) && (b6 == humanPlayer || b6 == computerPlayer) && 
  (b7 == humanPlayer || b7 == computerPlayer) && (b8 == humanPlayer || 
  b8 == computerPlayer) && (b9 == humanPlayer || b9 == computerPlayer)) {
    gridCells.forEach(element => element.removeEventListener('click', updateText))
    h2.textContent = " That's a TIE!"
  } 
}

// create a button to reset the game and a function inside the addEventListener instead of refreshing the page
const resetBtn = document.querySelectorAll('.reset-btn')
const clickedResetBtn = resetBtn.forEach(element => element.addEventListener('click', reset))

function reset () {
  // reload the document - there's an existing fn for that
  location.reload()
  // get value of each cell and make blank again
  document.getElementById('1').value = ''
  document.getElementById('2').value = ''
  document.getElementById('3').value = ''
  document.getElementById('4').value = ''
  document.getElementById('5').value = ''
  document.getElementById('6').value = ''
  document.getElementById('7').value = ''
  document.getElementById('8').value = ''
  document.getElementById('9').value = ''
}

// computers turn to play; *10 because there's 9 chances to play and want to get to 9
function computersTurn () {
  var takenCell = false
  while (takenCell === false) {
    var computerRandomMove = (Math.random() * 10).toFixed()
    var computerMove = document.getElementById(computerRandomMove)
    computerMove.setAttribute(computerPlayer)
  }
}
  </script>
  
</body>
</html>